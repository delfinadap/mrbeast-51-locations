<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MrBeast Puzzle ‚Äî Location Map</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: system-ui, -apple-system, sans-serif; background: #1a1a2e; color: #eee; }
  #map { width: 100%; height: calc(100vh - 160px); }
  .header { padding: 12px 20px; background: #16213e; border-bottom: 1px solid #333; }
  .header h1 { font-size: 18px; margin-bottom: 4px; }
  .header .sub { font-size: 12px; color: #888; }
  .stats { font-size: 12px; color: #aaa; padding: 6px 20px; background: #16213e; display: flex; gap: 24px; flex-wrap: wrap; }
  .stats .group { display: flex; gap: 6px; align-items: center; }
  .stats .label { color: #666; }
  .stats .num { font-weight: 700; }
  .stats .sep { color: #333; }
  .legend { display: flex; gap: 16px; padding: 10px 20px; background: #16213e; border-top: 1px solid #333; flex-wrap: wrap; align-items: center; }
  .legend-item { display: flex; align-items: center; gap: 6px; font-size: 13px; }
  .legend-dot { width: 14px; height: 14px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.3); }
  .legend-sq { width: 14px; height: 14px; border-radius: 2px; border: 2px solid rgba(255,255,255,0.3); }
  .filters { display: flex; gap: 6px; margin-left: auto; flex-wrap: wrap; }
  .filters button { background: #2a2a4a; color: #ccc; border: 1px solid #444; padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 12px; }
  .filters button.active { background: #4a4a8a; color: #fff; border-color: #66f; }
  .filters button:hover { background: #3a3a6a; }
  .toggle { display: flex; align-items: center; gap: 6px; font-size: 12px; color: #aaa; cursor: pointer; user-select: none; }
  .toggle input { cursor: pointer; }
</style>
</head>
<body>

<div class="header">
  <h1>MrBeast Million Dollar Puzzle ‚Äî Location Map</h1>
  <div class="sub">Color = confidence. Circle = Stage 1, üöóüê¥‚úàÔ∏è = beast.travel. Click markers for details.</div>
</div>
<div class="stats" id="stats"></div>
<div id="map"></div>
<div class="legend">
  <div class="legend-item"><div class="legend-dot" style="background:#22c55e"></div> Confirmed</div>
  <div class="legend-item"><div class="legend-dot" style="background:#f59e0b"></div> Probable</div>
  <div class="legend-item"><div class="legend-dot" style="background:#ef4444"></div> Unconfirmed / Disputed</div>
  <div class="legend-item" style="margin-left:12px; color:#444">|</div>
  <div class="legend-item"><div class="legend-dot" style="background:#888"></div> Stage 1</div>
  <div class="legend-item">üöóüê¥‚úàÔ∏è beast.travel</div>
  <div class="legend-item" style="margin-left:12px; color:#444">|</div>
  <div class="filters" id="filters">
    <label class="toggle"><input type="checkbox" checked data-conf="confirmed"> <span style="color:#22c55e">Confirmed</span></label>
    <label class="toggle"><input type="checkbox" checked data-conf="probable"> <span style="color:#f59e0b">Probable</span></label>
    <label class="toggle"><input type="checkbox" checked data-conf="unconfirmed"> <span style="color:#ef4444">Unconfirmed</span></label>
    <span style="color:#444; margin: 0 4px">|</span>
    <label class="toggle"><input type="checkbox" id="toggleBeastTravel"> beast.travel</label>
  </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const CSV = `name,country,lat,lng,category,confidence,puzzle,notes
Maputo,Mozambique,-25.9692,32.5732,playlist,confirmed,Playlist setup,First letters spell MAPUTO
Kandi,Benin,11.1308,2.9383,screen-bank,probable,Screen 1 + Magazine,>J> ‚Üí K AND I + Benioff ‚Üí KANDI BENIN. Grid row 57 (5+5) ‚úì.
Seoul,South Korea,37.5665,126.978,screen-bank,confirmed,Screen 2 + Calendar,RAINCOAT‚ÜíCROATIAN calendar‚ÜíSEOUL.
Cairo,Egypt,30.0444,31.2357,screen-bank,confirmed,Screen 3 + Feastables,Candyland color indexing
Lower Hutt,New Zealand,-41.2127,174.8997,screen-bank,confirmed,Screen 4 + Withdrawal slip,BeastBot confirmed "its lower hutt" (Feb 22).
Ankara,Turkey,39.9334,32.8597,screen-bank,confirmed,Screen 5 + Parking,ARA+ANK from spider/ballerina+tank/bank
Tbilisi,Georgia,41.7151,44.8271,screen-bank,probable,Screen 6 + Bird/Coffee,Bird cipher DINAMO + Georgia outline
Toad Suck,USA,35.0784,-92.5832,screen-bank,confirmed,Screen 7 + IPESIT/Pirate,3 parts: TOAD+SUCK+ARKANSAS.
Tijuana,Mexico,32.5149,-117.0382,screen-bank,confirmed,Screen 8 + Poster,Triple Caesar pun ‚Üí SALAD ORIGIN
Moscow,Russia,55.7558,37.6173,screen-bank,confirmed,Screen 12 + Rubik's Cube,Red+Cube=Red Square.
Accra,Ghana,5.6037,-0.187,commercial,confirmed,Vault door Scrabble,Scrabble tile values
Kabul,Afghanistan,34.5553,69.2075,commercial,confirmed,Morse code light,Light flashes Morse backwards
Arles,France,43.6767,4.6278,commercial,confirmed,Laser pattern,LASER MIX UP anagram
Kupang,Indonesia,-10.1772,123.607,commercial,confirmed,Clipboard overlay,Capital of East Nusa Tenggara
Lahore,Pakistan,31.5204,74.3587,commercial,confirmed,Periodic dots,Atomic numbers ‚Üí LA HO RE
Lima,Peru,-12.0464,-77.0428,commercial,confirmed,Belt wire colors,Color code 12-7-13-1
Tashkent,Uzbekistan,41.2995,69.2401,commercial,confirmed,Marked bills / Cash Pile,Spoonerism: Cash Tent ‚Üí Tash Kent
Tallinn,Estonia,59.437,24.7536,commercial,confirmed,Subtitles,Hyphens ‚Üí Seven Letter Big Lodge ‚Üí tall inn
New Orleans,USA,29.9511,-90.0715,commercial,unconfirmed,Tank numbers + I scream,Low community confidence
Yellowstone,USA,44.428,-110.5885,commercial,confirmed,Smoke grenade,YELLOW+S+T+ONE=YELLOWSTONE.
Algiers,Algeria,36.7538,3.0588,gift,confirmed,Airrack photos,A-L-G-I-E-R-S
Tampa Bay,USA,27.9506,-82.4572,gift,confirmed,Sketch gift,Madden 99 ‚Üí BUCS HOME. beast.travel confirms 5+3+7 format.
Wichita,USA,37.6872,-97.3301,gift,confirmed,Jimmy Fallon jigsaw,BeastBot: giver not recipient = MrBeast born Wichita.
Tierra del Fuego,Argentina,-54.8019,-68.303,gift,confirmed,Quackity sword,Beagle Channel
DeKalb,USA,41.9295,-88.7503,gift,confirmed,Hayleybaylee rings,Rings puzzle
Montreal,Canada,45.5017,-73.5673,gift,confirmed,Jim & Monika hearts,MAD Magazine fold-in.
Cairns,Australia,-16.9186,145.7781,gift,confirmed,Chris Hemsworth,LAND OF CAIRNS ‚Üí Queensland
Divo,C√¥te d'Ivoire,5.8372,-5.3597,gift,confirmed,Jack McKenna card trick,Card trick decode
Copenhagen,Denmark,55.6761,12.5683,gift,confirmed,Pierson blender,HAFNIUM CITY
Buffalo,USA,42.8864,-78.8784,gift,confirmed,Botez Sisters chess,Chess Game 6 cipher
Quito,Ecuador,-0.1807,-78.4678,commercial,confirmed,YouTube Short mirror,KEY-TOW-HECK-QUID-DOOR phonetic
Mal√©,Maldives,4.1755,73.5093,salesforce,probable,Malcolm in Water (BTS),Male Mal dives.
Iturup,Russia,45.1567,147.9164,salesforce,confirmed,Submarine Math (BTS),Sub count + grid ‚Üí ASCII.
Yellowknife,Canada,62.454,-114.3718,salesforce,confirmed,BTS Puzzle Maker,Multiple sources confirmed
Thane,India,19.2183,72.9781,salesforce,probable,Elephant 85673,85673 ‚Üí THANE.
Nazar√©,Portugal,39.6021,-9.0686,salesforce,confirmed,Salesforce Tower LED,SURF RECORD SITE WITH ARGENT HUE
Nome,USA,64.5011,-165.4064,salesforce,confirmed,Billboard letters,Read backwards ‚Üí NOME.
Dimtu,Ethiopia,6.9319,38.1278,salesforce,confirmed,Billboard numbers,04 09 13 20 21 ‚Üí DIMTU.
Gaborone,Botswana,-24.6282,25.9231,salesforce,probable,FAQ page,PRATE OR THIS ‚Üí prate synonym = GABS = Gaborone. Grid row 8 (8+8) ‚úì.
Antananarivo,Madagascar,-18.8792,47.5079,salesforce,confirmed,Dot-Dollar video,Nick dot puzzle solve. BeastBot confirmed. Grid row 86 (12+10) ‚úì.
Casablanca,Morocco,33.5731,-7.5898,commercial,confirmed,Slack emoji (SB ad),CA-SA-BL-AN-CA from Slack screen in commercial. Grid row 50 (10+7) ‚úì.
Heard Island,Australia,-53.1,73.5,lonesharksocial,confirmed,Bluesky homophones,Remote island
√éle de la Possession,French Southern Territories,-46.4,51.8,lonesharksocial,confirmed,Podcast anagram,Crozet Islands
Ascension Island,UK,-7.9467,-14.3559,lonesharksocial,confirmed,Facebook/BGG,BGG rankings acrostic
Windsor,Canada,42.3149,-83.0364,screen-bank,unconfirmed,Screen 9 + Crosswalk,SW images + crosswalk semaphore. BeastBot approved. Grid row 16 (7+7) ‚úì.
South Pole,Antarctica,-90,0,yt-short,unconfirmed,Chocolate heart YT Short,Community intel (Feb 21). Grid row 54 (5+4) ‚úì.
Sucre,Bolivia,-19.0196,-65.2619,gift,probable,Golden Present matrix,A NICE SUGAR ‚Üí Nice + sugar (French) = Sucre.
Eyjafjallaj√∂kull,Iceland,63.63,-19.62,crossword,confirmed,Crossword circled cells,16 circled cells anagram
Casper,USA,42.8666,-106.3131,beast-travel,probable,Car: BARODYNAMICS,Oil City nickname
Arzamas,Russia,55.392,43.8131,beast-travel,probable,Car: EBULLIOSCOPE,City of 33 churches
Baku,Azerbaijan,40.4093,49.8671,beast-travel,confirmed,Car: HAPAXANTHOUS,City of Winds
Surat,India,21.1702,72.8311,beast-travel,confirmed,Car: INCLINOMETER,Diamond City of India.
Marquette,USA,46.5436,-87.3954,beast-travel,probable,Car: MARIMBAPHONE,Queen City of the North
Beatty,USA,36.9086,-116.7592,beast-travel,confirmed,Car: NEBULOPHOBIA,Gateway to Death Valley.
Mosul,Iraq,36.34,43.13,beast-travel,confirmed,Car: OCHROLEUCOUS,Pearl of the North (Arabic).
Visby,Sweden,57.6348,18.2948,beast-travel,confirmed,Car: RECEPTACULAR,City of Roses + City of Ruins.
Istanbul,Turkey,41.0082,28.9784,beast-travel,probable,Car: RISORGIMENTO,City on Two Continents.
Nantucket,USA,41.2835,-70.0995,beast-travel,unconfirmed,Car: SALAMANDROID,Lady of the Sea.
Mayotte,France,-12.8275,45.1662,beast-travel,probable,Car: SCAPULOMANCY,Replaced Poveglia. Mayotte (French overseas territory).
Moora,Australia,-30.6389,116.0042,beast-travel,probable,Car: HEKISTOTHERM,Capital of the Plains. Grid Row 32 (5+9) M@1 ‚úì.
Mubi,Nigeria,10.2683,13.2643,beast-travel,unconfirmed,Car: FURFURACEOUS,City of Peace. Grid Row 37 (4+7) U@2 ‚úì.
Doha,Qatar,25.2854,51.531,screen-bank,confirmed,Screen 11 + Penny,BeastBot confirmed. Replaces denied Lincoln.
Giresun,Turkey,40.9128,38.3895,beast-travel,probable,Car: THEANTHROPIC,Motherland of Cherry. Official city website
L'Ascension,Canada,46.6747,-74.075,beast-travel,unconfirmed,Car: ULTRAMONTANE,Valley of the Rouge. CanCon
Okato,New Zealand,-39.191,173.88,beast-travel,confirmed,Horse: ABERUNCATORS,W3W confirmed
Nova Russas,Brazil,-4.7042,-40.5631,beast-travel,confirmed,Horse: DEAMBULATORY,W3W confirmed
ƒåesk√© Budƒõjovice,Czech Republic,48.9745,14.4746,beast-travel,confirmed,Horse: FISSICOSTATE,W3W towers.decoder.models
Christchurch,New Zealand,-43.5321,172.6362,beast-travel,confirmed,Horse: LACHRYMIFORM,W3W driven.hint.improving
Castelo Branco,Portugal,39.8223,-7.4931,beast-travel,confirmed,Horse: LAEVODUCTION,W3W dusts.enigma.desks
Sokode,Togo,8.9833,1.1333,beast-travel,confirmed,Horse: OLERICULTURE,W3W calibrate.charted.nuzzle.
Curic√≥,Chile,-34.9828,-71.2394,beast-travel,probable,Horse: SCAFFMASTERS,W3W quiz.delivers.equality
Monkey Bay,Malawi,-14.0833,34.9167,beast-travel,confirmed,Horse: UNDERBRIDGES,W3W cryptically.packaging.bathrooms.
Antalya,Turkey,36.8969,30.7133,beast-travel,probable,Horse: WINDCHEATERS,W3W sticky.rejected.jigsaw
Ambanja,Madagascar,-13.6847,48.4497,beast-travel,confirmed,Plane: ABOUTSLEDGES,Otiv Mandroso bank
Saint-Pierre,Saint Pierre and Miquelon,46.7811,-56.1764,beast-travel,confirmed,Plane: ABSQUATULATE,Lighthouse matched
Krasnodar,Russia,45.0355,38.9753,beast-travel,confirmed,Plane: ECTYPOGRAPHY,Russian street signs
Tucum√°n,Argentina,-26.8083,-65.2176,beast-travel,confirmed,Plane: ELEEMOSYNARY,Mercedes Sosa Theater
Derby,Australia,-17.3089,123.6275,beast-travel,confirmed,Plane: EPANASTROPHE,Derby Wharf
Manaus,Brazil,-3.119,-60.0217,beast-travel,confirmed,Plane: EXSANGUINOUS,GeoGuessr near MUSA
Pune,India,18.5196,73.8553,beast-travel,confirmed,Plane: LAMPADEPHORE,GeoGuessr near synagogue
Hasik,Oman,17.4756,55.2296,beast-travel,confirmed,Plane: LIGNIPERDOUS,GeoGuessr near waterfalls
Velingrad,Bulgaria,42.0275,23.9917,beast-travel,confirmed,Plane: MACHAIRODONT,Lukoil roundabout.
Marrakesh,Morocco,31.6295,-7.9811,beast-travel,confirmed,Plane: NARRISCHKEIT,YSL Museum
Orlando,USA,28.5383,-81.3792,beast-travel,confirmed,Plane: ODORIVECTORS,Airport entrance
Charlotte,USA,35.2271,-80.8431,beast-travel,confirmed,Plane: SAPONIFIABLE,NASCAR HoF
Edmonton,Canada,53.5461,-113.4938,beast-travel,confirmed,Plane: SERPENTICIDE,Muttart Conservatory
Vladivostok,Russia,43.1332,131.9113,beast-travel,confirmed,Plane: SNALLYGASTER,Golden Horn Bay
Cochabamba,Bolivia,-17.3895,-66.157,beast-travel,confirmed,Plane: TERAMORPHOUS,Christ of the Concord
Tacurong,Philippines,6.6925,124.6764,beast-travel,confirmed,Plane: WINTERBOURNE,Talakudong Rotunda`;

function parseCSV(csv) {
  const lines = csv.trim().split('\n');
  const headers = lines[0].split(',');
  return lines.slice(1).map(line => {
    const vals = line.split(',');
    const obj = {};
    headers.forEach((h, i) => obj[h.trim()] = vals[i]?.trim() || '');
    obj.lat = parseFloat(obj.lat);
    obj.lng = parseFloat(obj.lng);
    return obj;
  });
}

const locations = parseCSV(CSV);

const map = L.map('map', {
  center: [20, 10],
  zoom: 2,
  minZoom: 2,
  worldCopyJump: true,
  attributionControl: false
});

L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
  attribution: '&copy; OSM &copy; CARTO',
  subdomains: 'abcd',
  maxZoom: 19
}).addTo(map);

const colors = {
  confirmed: '#22c55e',
  probable: '#f59e0b',
  unconfirmed: '#ef4444',
  disputed: '#ef4444'
};

const categoryLabels = {
  'playlist': 'Playlist',
  'screen-bank': 'Screen + Bank',
  'commercial': 'Commercial',
  'gift': 'Gift',
  'lonesharksocial': 'Lone Shark Social',
  'crossword': 'Crossword',
  'salesforce': 'Salesforce',
  'beast-travel': 'beast.travel (Stage 2)'
};

const allMarkers = [];
let showBeastTravel = false;
const showConfidence = { confirmed: true, probable: true, unconfirmed: true, disputed: true };

function createMarker(loc) {
  const color = colors[loc.confidence] || '#888';
  const isBeastTravel = loc.category === 'beast-travel';

  let marker;
  if (isBeastTravel) {
    // Emoji icons for beast.travel based on transport type
    const puzzle = loc.puzzle.toLowerCase();
    let emoji = 'üìç';
    if (puzzle.includes('plane')) emoji = '‚úàÔ∏è';
    else if (puzzle.includes('horse')) emoji = 'üê¥';
    else if (puzzle.includes('car')) emoji = 'üöó';
    const icon = L.divIcon({
      className: '',
      html: `<div style="font-size:13px;text-shadow:0 0 3px ${color}, 0 0 6px ${color};filter:drop-shadow(0 0 2px rgba(0,0,0,0.8));line-height:1;cursor:pointer;">${emoji}</div>`,
      iconSize: [16, 16],
      iconAnchor: [8, 8]
    });
    marker = L.marker([loc.lat, loc.lng], { icon });
  } else {
    // Circle markers for Stage 1
    marker = L.circleMarker([loc.lat, loc.lng], {
      radius: 5,
      fillColor: color,
      color: '#fff',
      weight: 1.5,
      opacity: 1,
      fillOpacity: 0.85
    });
  }

  const catLabel = categoryLabels[loc.category] || loc.category;
  marker.bindPopup(`
    <div style="font-family:system-ui;min-width:200px">
      <div style="font-size:15px;font-weight:700;margin-bottom:4px">${loc.name}, ${loc.country}</div>
      <div style="font-size:12px;color:#666;margin-bottom:6px">${loc.lat.toFixed(4)}, ${loc.lng.toFixed(4)}</div>
      <div style="font-size:13px;margin-bottom:3px"><b>Category:</b> ${catLabel}</div>
      <div style="font-size:13px;margin-bottom:3px"><b>Confidence:</b> <span style="color:${color};font-weight:600">${loc.confidence.toUpperCase()}</span></div>
    </div>
  `);

  marker.bindTooltip(`${loc.name}, ${loc.country}`, {
    permanent: false,
    direction: 'top',
    offset: [0, -8]
  });

  marker._locData = loc;
  return marker;
}

locations.forEach(loc => {
  const marker = createMarker(loc);
  allMarkers.push(marker);
});

function updateVisibility() {
  allMarkers.forEach(m => {
    const loc = m._locData;
    const isBT = loc.category === 'beast-travel';

    let show = true;

    // beast.travel toggle
    if (isBT && !showBeastTravel) show = false;

    // confidence filter ‚Äî "disputed" and "unconfirmed" share one toggle
    const confKey = (loc.confidence === 'disputed') ? 'unconfirmed' : loc.confidence;
    if (show && !showConfidence[confKey]) show = false;

    if (show) m.addTo(map);
    else map.removeLayer(m);
  });
}

// Stats
const s1 = locations.filter(l => l.category !== 'beast-travel');
const bt = locations.filter(l => l.category === 'beast-travel');
const s1c = s1.filter(l => l.confidence === 'confirmed').length;
const s1p = s1.filter(l => l.confidence === 'probable').length;
const s1unc = s1.filter(l => l.confidence === 'unconfirmed').length;
const s1dis = s1.filter(l => l.confidence === 'disputed').length;
const btc = bt.filter(l => l.confidence === 'confirmed').length;
const btp = bt.filter(l => l.confidence === 'probable').length;
const btunc = bt.filter(l => l.confidence === 'unconfirmed').length;
const btdis = bt.filter(l => l.confidence === 'disputed').length;

function breakdownStr(c, p, u, d) {
  const parts = [];
  if (c) parts.push(`${c} confirmed`);
  if (p) parts.push(`${p} probable`);
  if (u) parts.push(`${u} unconfirmed`);
  if (d) parts.push(`${d} disputed`);
  return parts.join(', ');
}

document.getElementById('stats').innerHTML =
  `<div class="group"><span class="label">Stage 1:</span> <span class="num">${s1.length}</span> <span class="label">(${breakdownStr(s1c, s1p, s1unc, s1dis)})</span></div>` +
  `<span class="sep">|</span>` +
  `<div class="group"><span class="label">beast.travel:</span> <span class="num">${bt.length}</span> <span class="label">(${breakdownStr(btc, btp, btunc, btdis)})</span></div>`;

// Confidence toggles
document.querySelectorAll('#filters input[data-conf]').forEach(cb => {
  cb.addEventListener('change', e => {
    showConfidence[e.target.dataset.conf] = e.target.checked;
    if (e.target.dataset.conf === 'unconfirmed') showConfidence.disputed = e.target.checked;
    updateVisibility();
  });
});

// beast.travel toggle
document.getElementById('toggleBeastTravel').addEventListener('change', e => {
  showBeastTravel = e.target.checked;
  updateVisibility();
});

// Initial render ‚Äî beast.travel hidden by default
updateVisibility();
</script>
</body>
</html>
