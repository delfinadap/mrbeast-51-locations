<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MrBeast Puzzle — 3D Globe</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: system-ui, -apple-system, sans-serif; background: #000; color: #eee; overflow: hidden; }
  #globe { width: 100vw; height: 100vh; }
  .header {
    position: absolute; top: 0; left: 0; right: 0; z-index: 10;
    padding: 12px 20px; background: rgba(22,33,62,0.85); backdrop-filter: blur(8px);
    border-bottom: 1px solid #333;
  }
  .header h1 { font-size: 18px; margin-bottom: 4px; }
  .header .sub { font-size: 12px; color: #888; }
  .legend {
    position: absolute; bottom: 0; left: 0; right: 0; z-index: 10;
    display: flex; gap: 16px; padding: 10px 20px;
    background: rgba(22,33,62,0.85); backdrop-filter: blur(8px);
    border-top: 1px solid #333; flex-wrap: wrap; align-items: center;
  }
  .legend-item { display: flex; align-items: center; gap: 6px; font-size: 13px; }
  .legend-dot { width: 12px; height: 12px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.3); }
  .filters { display: flex; gap: 6px; margin-left: auto; flex-wrap: wrap; }
  .toggle { display: flex; align-items: center; gap: 6px; font-size: 12px; color: #aaa; cursor: pointer; user-select: none; }
  .toggle input { cursor: pointer; }
  .stats { font-size: 12px; color: #aaa; display: flex; gap: 18px; margin-top: 4px; align-items: center; }
  .stats .num { font-weight: 700; color: #eee; }
  .stats .sep { color: #444; }
</style>
</head>
<body>

<div class="header">
  <h1>MrBeast Million Dollar Puzzle — 3D Globe</h1>
  <div class="sub">Drag to rotate. Scroll to zoom. Click points for details. Feedback? <a href="https://discord.gg/KCtjNMJeYv" style="color:#66f" target="_blank">discord.gg/KCtjNMJeYv</a></div>
  <div class="stats" id="stats"></div>
</div>

<div id="globe"></div>

<div class="legend">
  <div class="legend-item"><div class="legend-dot" style="background:#22c55e"></div> Confirmed</div>
  <div class="legend-item"><div class="legend-dot" style="background:#f59e0b"></div> Probable</div>
  <div class="legend-item"><div class="legend-dot" style="background:#ef4444"></div> Unconfirmed / Disputed</div>
  <div class="legend-item" style="margin-left:8px;color:#444">|</div>
  <div class="legend-item"><div class="legend-dot" style="background:#888"></div> Stage 1 (dots)</div>
  <div class="legend-item"><div class="legend-dot" style="background:transparent;border:2px solid #888;box-shadow:0 0 4px #888"></div> beast.travel (rings)</div>
  <div class="filters">
    <label class="toggle"><input type="checkbox" checked id="fConfirmed"> <span style="color:#22c55e">Confirmed</span></label>
    <label class="toggle"><input type="checkbox" checked id="fProbable"> <span style="color:#f59e0b">Probable</span></label>
    <label class="toggle"><input type="checkbox" checked id="fUnconfirmed"> <span style="color:#ef4444">Unconfirmed</span></label>
    <span style="color:#444; margin: 0 4px">|</span>
    <label class="toggle"><input type="checkbox" id="fBeastTravel"> beast.travel</label>
  </div>
</div>

<script src="https://unpkg.com/globe.gl@2.35.1/dist/globe.gl.min.js"></script>
<script>

const CSV = `name,country,lat,lng,category,confidence,puzzle,notes
Maputo,Mozambique,-25.9692,32.5732,playlist,confirmed,Playlist setup,First letters spell MAPUTO
Cairo,Egypt,30.0444,31.2357,screen-bank,confirmed,Screen 3 + Feastables,Candyland color indexing
Ankara,Turkey,39.9334,32.8597,screen-bank,confirmed,Screen 5 + Parking,ARA+ANK from spider/ballerina+tank/bank
Tijuana,Mexico,32.5149,-117.0382,screen-bank,confirmed,Screen 8 + Poster,Triple Caesar pun
Accra,Ghana,5.6037,-0.187,commercial,confirmed,Vault door Scrabble,Scrabble tile values
Kabul,Afghanistan,34.5553,69.2075,commercial,confirmed,Morse code light,Light flashes Morse backwards
Arles,France,43.6767,4.6278,commercial,confirmed,Laser pattern,LASER MIX UP anagram
Kupang,Indonesia,-10.1772,123.607,commercial,confirmed,Clipboard overlay,Capital of East Nusa Tenggara
Lahore,Pakistan,31.5204,74.3587,commercial,confirmed,Periodic dots,Atomic numbers
Lima,Peru,-12.0464,-77.0428,commercial,confirmed,Belt wire colors,Color code 12-7-13-1
Tallinn,Estonia,59.437,24.7536,commercial,confirmed,Subtitles,tall inn from hyphens
Divo,Côte d'Ivoire,5.8372,-5.3597,gift,confirmed,Jack McKenna card trick,Card trick decode
Buffalo,USA,42.8864,-78.8784,gift,confirmed,Botez Sisters chess,Chess Game 6 cipher
Tierra del Fuego,Argentina,-54.8019,-68.303,gift,confirmed,Quackity sword,Beagle Channel
DeKalb,USA,41.9295,-88.7503,gift,confirmed,Hayleybaylee rings,Rings puzzle
Wichita,USA,37.6872,-97.3301,gift,probable,Jimmy Fallon jigsaw,JIMMYS BIRTHPLACE — BeastBot: giver not recipient = MrBeast born Wichita
Cairns,Australia,-16.9186,145.7781,gift,confirmed,Chris Hemsworth,LAND OF CAIRNS
Copenhagen,Denmark,55.6761,12.5683,gift,confirmed,Pierson blender,HAFNIUM CITY
Algiers,Algeria,36.7538,3.0588,gift,confirmed,Airrack photos,A-L-G-I-E-R-S
Heard Island,Australia,-53.1,73.5,lonesharksocial,confirmed,Bluesky homophones,Remote island
Île de la Possession,French Southern Territories,-46.4,51.8,lonesharksocial,confirmed,Podcast anagram,Crozet Islands
Ascension Island,UK,-7.9467,-14.3559,lonesharksocial,confirmed,Facebook/BGG,BGG rankings acrostic
Eyjafjallajökull,Iceland,63.63,-19.62,crossword,confirmed,Crossword circled cells,16 circled cells anagram
Yellowknife,Canada,62.454,-114.3718,salesforce,confirmed,BTS Puzzle Maker,Omega confirmed
Casablanca,Morocco,33.5731,-7.5898,salesforce,confirmed,Slack emoji,CA-SA-BL-AN-CA
Lower Hutt,New Zealand,-41.2127,174.8997,screen-bank,probable,Screen 4 + Withdrawal slip,T9 decode of routing number → LOWER HUTT
Tbilisi,Georgia,41.7151,44.8271,screen-bank,probable,Screen 6 + Bird/Coffee,Bird cipher DINAMO + Georgia
Cebu,Philippines,10.3157,123.8854,screen-bank,probable,Screen 7 + IPESIT/Pirate,CEBU phonetic
Lincoln,USA,40.8136,-96.7026,screen-bank,probable,Screen 11 + Penny jar,Penny weight = latitude
Moscow,Russia,55.7558,37.6173,screen-bank,probable,Screen 12 + Rubiks Cube,Red + Cube = Red Square
Tashkent,Uzbekistan,41.2995,69.2401,commercial,probable,Marked bills / Cash Pile,CASH TENT
New Orleans,USA,29.9511,-90.0715,commercial,probable,Tank numbers + I scream,New Orleans ice cream
Tampa Bay,USA,27.9506,-82.4572,gift,probable,Sketch gift,Madden 99 → BUCS
Montreal,Canada,45.5017,-73.5673,gift,probable,Jim & Monika hearts,MAD Magazine fold-in → MONTREAL CANADA
Benin City,Nigeria,6.3350,5.6037,screen-bank,unconfirmed,Screen 1 + Magazine,Marc Benioff → mark BENI off
Basel,Switzerland,47.5596,7.5886,screen-bank,unconfirmed,Screen 10 + Sudoku,Euler birthplace
Granada,Spain,37.1773,-3.5986,commercial,unconfirmed,Smoke grenade,GRENADE → GRANADA (Spanish etymology)
Dimtu,Ethiopia,6.9319,38.1278,salesforce,probable,Billboard numbers,04 09 13 20 21 → A1Z26 = DIMTU
Nome,USA,64.5011,-165.4064,salesforce,probable,Billboard letters,Read underline right-to-left = NOME
Ambanja,Madagascar,-13.6847,48.4497,beast-travel,confirmed,Plane: ABOUTSLEDGES,Otiv Mandroso bank
Saint-Pierre,Saint Pierre and Miquelon,46.7811,-56.1764,beast-travel,confirmed,Plane: ABSQUATULATE,Lighthouse matched
Krasnodar,Russia,45.0355,38.9753,beast-travel,confirmed,Plane: ECTYPOGRAPHY,Russian street signs
Tucumán,Argentina,-26.8083,-65.2176,beast-travel,confirmed,Plane: ELEEMOSYNARY,Mercedes Sosa Theater
Derby,Australia,-17.3089,123.6275,beast-travel,confirmed,Plane: EPANOSTROPHE,Derby Wharf
Okato,New Zealand,-39.191,173.88,beast-travel,confirmed,Horse: ABERUNCATORS,Taranaki region
Nova Russas,Brazil,-4.7042,-40.5631,beast-travel,confirmed,Horse: DEAMBULATORY,W3W confirmed
České Budějovice,Czech Republic,48.9745,14.4746,beast-travel,confirmed,Horse: FISSICOSTATE,W3W confirmed
Regina,Canada,50.4452,-104.6189,beast-travel,confirmed,Car photo puzzle,Image match
Casper,USA,42.8666,-106.3131,beast-travel,probable,Car: BARODYNAMICS,Oil City nickname
Arzamas,Russia,55.392,43.8131,beast-travel,probable,Car: EBULLIOSCOPE,City of 33 churches
Dar es Salaam,Tanzania,-6.7924,39.2083,beast-travel,disputed,Car: FURFURACEOUS,Home of peace — disputed
Baku,Azerbaijan,40.4093,49.8671,beast-travel,confirmed,Car: HAPAXANTHOUS,City of Winds
Winnipeg,Canada,49.8951,-97.1384,beast-travel,probable,Car: HEKISTOTHERM,Coldest major city
Marquette,USA,46.5436,-87.3954,beast-travel,probable,Car: MARIMBAPHONE,Queen City of the North
Surat,India,21.1702,72.8311,beast-travel,probable,Car: INCLINOMETER,Diamond City of India
Nazaré,Portugal,39.6021,-9.0686,salesforce,confirmed,Salesforce Tower LED,SURF RECORD SITE WITH ARGENT HUE
Quito,Ecuador,-0.1807,-78.4678,commercial,confirmed,YouTube Short hallway,KEY-TOW-HECK-QUID-DOOR phonetic
Thane,India,19.2183,72.9781,salesforce,probable,Elephant 85673,85673 indexes into ELEPHANT = THANE
Christchurch,New Zealand,-43.5321,172.6362,beast-travel,confirmed,Horse: LACHRYMIFORM,Cryptic → W3W: driven.hint.improving
Castelo Branco,Portugal,39.8223,-7.4931,beast-travel,confirmed,Horse: LAEVODUCTION,Cryptic → W3W: dusts.enigma.desks
Manaus,Brazil,-3.1190,-60.0217,beast-travel,confirmed,Plane: EXSANGUINOUS,GeoGuessr near MUSA museum
Pune,India,18.5196,73.8553,beast-travel,confirmed,Plane: LAMPADEPHORE,GeoGuessr near Ohel David Synagogue
Hasik,Oman,17.4756,55.2296,beast-travel,confirmed,Plane: LIGNIPERDOUS,GeoGuessr near Natif Waterfalls
Iturup,Russia,45.1567,147.9164,salesforce,probable,Submarine Math (BTS),Sub count + grid → ASCII = ITURUP`;

// Parse CSV
function parseCSV(csv) {
  const lines = csv.trim().split('\n');
  const headers = lines[0].split(',');
  return lines.slice(1).map(line => {
    const vals = line.split(',');
    const obj = {};
    headers.forEach((h, i) => obj[h.trim()] = vals[i]?.trim() || '');
    obj.lat = parseFloat(obj.lat);
    obj.lng = parseFloat(obj.lng);
    return obj;
  });
}

const locations = parseCSV(CSV);

const colors = {
  confirmed: '#22c55e',
  probable: '#f59e0b',
  unconfirmed: '#ef4444',
  disputed: '#ef4444'
};

const categoryLabels = {
  'playlist': 'Playlist',
  'screen-bank': 'Screen + Bank',
  'commercial': 'Commercial',
  'gift': 'Gift',
  'lonesharksocial': 'Lone Shark Social',
  'crossword': 'Crossword',
  'salesforce': 'Salesforce',
  'beast-travel': 'beast.travel'
};

// Filter state
const filters = { confirmed: true, probable: true, unconfirmed: true, disputed: true, beastTravel: false };

function passesFilter(loc) {
  const confKey = loc.confidence === 'disputed' ? 'unconfirmed' : loc.confidence;
  if (!filters[confKey]) return false;
  if (loc.category === 'beast-travel' && !filters.beastTravel) return false;
  return true;
}

function getStage1() { return locations.filter(l => l.category !== 'beast-travel' && passesFilter(l)); }
function getBeastTravel() { return locations.filter(l => l.category === 'beast-travel' && passesFilter(l)); }

function makeLabel(d) {
  const cat = categoryLabels[d.category] || d.category;
  const col = colors[d.confidence] || '#888';
  return `
    <div style="font-family:system-ui;background:rgba(22,33,62,0.92);padding:10px 14px;border-radius:8px;border:1px solid #444;min-width:220px;backdrop-filter:blur(8px)">
      <div style="font-size:15px;font-weight:700;margin-bottom:4px">${d.name}, ${d.country}</div>
      <div style="font-size:11px;color:#666;margin-bottom:6px">${d.lat.toFixed(4)}, ${d.lng.toFixed(4)}</div>
      <div style="font-size:13px;margin-bottom:3px"><b>Category:</b> ${cat}</div>
      <div style="font-size:13px;margin-bottom:3px"><b>Confidence:</b> <span style="color:${col};font-weight:600">${d.confidence.toUpperCase()}</span></div>
      <div style="font-size:12px;color:#aaa;margin-top:4px">${d.puzzle}</div>
      <div style="font-size:11px;color:#666;margin-top:2px">${d.notes}</div>
    </div>`;
}

// Combine all visible locations into one array for the points layer
function getAllVisible() {
  return locations.filter(passesFilter);
}

// Build globe — all locations as native points (fully interactive)
const globe = Globe()
  .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-night.jpg')
  .backgroundImageUrl('https://unpkg.com/three-globe/example/img/night-sky.png')
  .pointsData(getAllVisible())
  .pointLat('lat')
  .pointLng('lng')
  .pointColor(d => colors[d.confidence] || '#888')
  .pointRadius(d => d.category === 'beast-travel' ? 0.4 : 0.5)
  .pointAltitude(0.01)
  .pointLabel(makeLabel)
  // beast.travel: rings around points for visual distinction
  .ringsData(getBeastTravel())
  .ringLat('lat')
  .ringLng('lng')
  .ringColor(d => () => colors[d.confidence] || '#888')
  .ringMaxRadius(1.2)
  .ringPropagationSpeed(0.8)
  .ringRepeatPeriod(2000)
  .ringAltitude(0.01)
  (document.getElementById('globe'));

// Adjust camera
globe.pointOfView({ lat: 30, lng: 30, altitude: 2.2 });

// Handle resize
window.addEventListener('resize', () => {
  globe.width(window.innerWidth);
  globe.height(window.innerHeight);
});

// Stats — always show both Stage 1 and beast.travel breakdowns
function breakdownStr(locs) {
  const c = locs.filter(l => l.confidence === 'confirmed').length;
  const p = locs.filter(l => l.confidence === 'probable').length;
  const u = locs.filter(l => l.confidence === 'unconfirmed').length;
  const d = locs.filter(l => l.confidence === 'disputed').length;
  const parts = [];
  if (c) parts.push(`${c} confirmed`);
  if (p) parts.push(`${p} probable`);
  if (u) parts.push(`${u} unconfirmed`);
  if (d) parts.push(`${d} disputed`);
  return parts.join(', ');
}

function updateStats() {
  const s1All = locations.filter(l => l.category !== 'beast-travel');
  const btAll = locations.filter(l => l.category === 'beast-travel');
  document.getElementById('stats').innerHTML =
    `<span>Stage 1: <span class="num">${s1All.length}</span> (${breakdownStr(s1All)})</span>` +
    `<span class="sep">|</span>` +
    `<span>beast.travel: <span class="num">${btAll.length}</span> (${breakdownStr(btAll)})</span>`;
}

function refresh() {
  globe.pointsData(getAllVisible());
  globe.ringsData(getBeastTravel());
  updateStats();
}

// Filter listeners
document.getElementById('fConfirmed').addEventListener('change', e => { filters.confirmed = e.target.checked; refresh(); });
document.getElementById('fProbable').addEventListener('change', e => { filters.probable = e.target.checked; refresh(); });
document.getElementById('fUnconfirmed').addEventListener('change', e => {
  filters.unconfirmed = e.target.checked;
  filters.disputed = e.target.checked;
  refresh();
});
document.getElementById('fBeastTravel').addEventListener('change', e => { filters.beastTravel = e.target.checked; refresh(); });

updateStats();

</script>
</body>
</html>
